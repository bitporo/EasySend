import{i as e,_ as t,o as n,c as i,w as o,a as s,n as a,b as r,t as l,r as c,d as u,e as d,f as m,I as h,g as p,h as f,v as I,j as g,k as b,l as x,m as y,p as v,q as k,s as w,B as C,u as L,x as P,D as T,T as S,y as $,U as E,O as D,Z as M,R as A,z as V,F as _,A as z,C as K,E as F,G as R,H as O,J as B,K as N,L as H,M as U,N as Y,P as j}from"./index-B0jgpstP.js";const G={data:()=>({}),created(){this.popup=this.getParent()},methods:{getParent(e="uniPopup"){let t=this.$parent,n=t.$options.name;for(;n!==e;){if(t=t.$parent,!t)return!1;n=t.$options.name}return t}}},X={en:{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},"zh-Hans":{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"},"zh-Hant":{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}},{t:Z}=e(X);const W=t({name:"uniPopupDialog",mixins:[G],emits:["confirm","close","update:modelValue","input"],props:{inputType:{type:String,default:"text"},showClose:{type:Boolean,default:!0},modelValue:{type:[Number,String],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""},maxlength:{type:Number,default:-1},focus:{type:Boolean,default:!0}},data:()=>({dialogType:"error",val:""}),computed:{okText(){return this.confirmText||Z("uni-popup.ok")},closeText(){return this.cancelText||Z("uni-popup.cancel")},placeholderText(){return this.placeholder||Z("uni-popup.placeholder")},titleText(){return this.title||Z("uni-popup.title")}},watch:{type(e){this.dialogType=e},mode(e){"input"===e&&(this.dialogType="info")},value(e){-1!=this.maxlength&&"input"===this.mode?this.val=e.slice(0,this.maxlength):this.val=e},val(e){this.$emit("update:modelValue",e)}},created(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value,this.val=this.modelValue):this.dialogType=this.type},methods:{onOk(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog(){this.$emit("close"),this.beforeClose||this.popup.close()},close(){this.popup.close()}}},[["render",function(e,t,p,f,I,g){const b=d,x=m,y=h;return n(),i(x,{class:"uni-popup-dialog"},{default:o((()=>[s(x,{class:"uni-dialog-title"},{default:o((()=>[s(b,{class:a(["uni-dialog-title-text",["uni-popup__"+I.dialogType]])},{default:o((()=>[r(l(g.titleText),1)])),_:1},8,["class"])])),_:1}),"base"===p.mode?(n(),i(x,{key:0,class:"uni-dialog-content"},{default:o((()=>[c(e.$slots,"default",{},(()=>[s(b,{class:"uni-dialog-content-text"},{default:o((()=>[r(l(p.content),1)])),_:1})]),!0)])),_:3})):(n(),i(x,{key:1,class:"uni-dialog-content"},{default:o((()=>[c(e.$slots,"default",{},(()=>[s(y,{class:"uni-dialog-input",maxlength:p.maxlength,modelValue:I.val,"onUpdate:modelValue":t[0]||(t[0]=e=>I.val=e),type:p.inputType,placeholder:g.placeholderText,focus:p.focus},null,8,["maxlength","modelValue","type","placeholder","focus"])]),!0)])),_:3})),s(x,{class:"uni-dialog-button-group"},{default:o((()=>[p.showClose?(n(),i(x,{key:0,class:"uni-dialog-button",onClick:g.closeDialog},{default:o((()=>[s(b,{class:"uni-dialog-button-text"},{default:o((()=>[r(l(g.closeText),1)])),_:1})])),_:1},8,["onClick"])):u("",!0),s(x,{class:a(["uni-dialog-button",p.showClose?"uni-border-left":""]),onClick:g.onOk},{default:o((()=>[s(b,{class:"uni-dialog-button-text uni-button-color"},{default:o((()=>[r(l(g.okText),1)])),_:1})])),_:1},8,["class","onClick"])])),_:1})])),_:3})}],["__scopeId","data-v-5cd5f2dd"]]);class J{constructor(e,t){this.options=e,this.animation=p({...e}),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let n=this.currentStepAnimates[this.next],i={};if(i=n||{styles:{},config:{}},q.includes(e)){i.styles.transform||(i.styles.transform="");let n="";"rotate"===e&&(n="deg"),i.styles.transform+=`${e}(${t+n}) `}else i.styles[e]=`${t}`;this.currentStepAnimates[this.next]=i}_animateRun(e={},t={}){let n=this.$.$refs.ani.ref;if(n)return new Promise(((i,o)=>{nvueAnimation.transition(n,{styles:e,...t},(e=>{i()}))}))}_nvueNextAnimate(e,t=0,n){let i=e[t];if(i){let{styles:o,config:s}=i;this._animateRun(o,s).then((()=>{t+=1,this._nvueNextAnimate(e,t,n)}))}else this.currentStepAnimates={},"function"==typeof n&&n(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const q=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function Q(e,t){if(t)return clearTimeout(t.timer),new J(e,t)}q.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{J.prototype[e]=function(...t){return this.animation[e](...t),this}}));const ee=t({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let n in e){t+=this.toLine(n)+":"+e[n]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=Q(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(n){console.error(`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=Q(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},n=(e,n)=>{"fade"===n?t.opacity=this.animationType(e)[n]:t.transform+=this.animationType(e)[n]+" "};return"string"==typeof this.modeClass?n(e,this.modeClass):this.modeClass.forEach((t=>{n(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let n=null;"fade"===t?n=e?0:1:(n=e?"-100%":"0","zoom-in"===t&&(n=e?.8:1),"zoom-out"===t&&(n=e?1.2:1),"slide-right"===t&&(n=e?"100%":"0"),"slide-bottom"===t&&(n=e?"100%":"0")),this.animation[this.animationMode()[t]](n)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((n=>{t(e,n)})),this.animation},animationType:e=>({fade:e?0:1,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(e,t,s,r,l,u){const d=m;return f((n(),i(d,{ref:"ani",animation:l.animationData,class:a(s.customClass),style:g(u.transformStyles),onClick:u.onClick},{default:o((()=>[c(e.$slots,"default")])),_:3},8,["animation","class","style","onClick"])),[[I,l.isShow]])}]]);const te=t({name:"uniPopup",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(t=>{if(this.disable)return;const n=Object.keys(e).find((n=>{const i=t.key,o=e[n];return o===i||Array.isArray(o)&&o.includes(i)}));n&&setTimeout((()=>{this.$emit(n,{})}),0)}))},render:()=>{}}},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){document.getElementsByTagName("body")[0].style.overflow=e?"hidden":"visible"}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles(){let e={backgroundColor:this.bg};return this.borderRadius,e=Object.assign(e,{borderRadius:this.borderRadius}),e},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:n,safeArea:i,screenHeight:o,safeAreaInsets:s}=v();this.popupWidth=e,this.popupHeight=t+(n||0),i&&this.safeArea?this.safeAreaInsets=s.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},activated(){this.setH5Visible(!this.showPopup)},deactivated(){this.setH5Visible(!0)},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(e=!0){document.getElementsByTagName("body")[0].style.overflow=e?"visible":"hidden"},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){if(this.showPopup)return;e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):console.error("缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}},[["render",function(e,t,r,l,d,h){const p=b(x("uni-transition"),ee),f=m,I=y("keypress");return d.showPopup?(n(),i(f,{key:0,class:a(["uni-popup",[d.popupstyle,h.isDesktop?"fixforpc-z-index":""]])},{default:o((()=>[s(f,{onTouchstart:h.touchstart},{default:o((()=>[d.maskShow?(n(),i(p,{key:"1",name:"mask","mode-class":"fade",styles:d.maskClass,duration:d.duration,show:d.showTrans,onClick:h.onTap},null,8,["styles","duration","show","onClick"])):u("",!0),s(p,{key:"2","mode-class":d.ani,name:"content",styles:d.transClass,duration:d.duration,show:d.showTrans,onClick:h.onTap},{default:o((()=>[s(f,{class:a(["uni-popup__wrapper",[d.popupstyle]]),style:g(h.getStyles),onClick:h.clear},{default:o((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick"])])),_:3},8,["mode-class","styles","duration","show","onClick"])])),_:3},8,["onTouchstart"]),d.maskShow?(n(),i(I,{key:0,onEsc:h.onTap},null,8,["onEsc"])):u("",!0)])),_:3},8,["class"])):u("",!0)}],["__scopeId","data-v-f0b957f8"]]);const ne=t({},[["render",function(e,t){return n(),k("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24",height:"24",viewBox:"0 0 48 48"},[w("path",{fill:"#90CAF9",d:"M40 45L8 45 8 3 30 3 40 13z"}),w("path",{fill:"#E1F5FE",d:"M38.5 14L29 14 29 4.5z"})])}]]);var ie=C.extend({name:"textarea",theme:function(e){var t=e.dt;return"\n.p-textarea {\n    font-family: inherit;\n    font-feature-settings: inherit;\n    font-size: 1rem;\n    color: ".concat(t("textarea.color"),";\n    background: ").concat(t("textarea.background"),";\n    padding: ").concat(t("textarea.padding.y")," ").concat(t("textarea.padding.x"),";\n    border: 1px solid ").concat(t("textarea.border.color"),";\n    transition: background ").concat(t("textarea.transition.duration"),", color ").concat(t("textarea.transition.duration"),", border-color ").concat(t("textarea.transition.duration"),", outline-color ").concat(t("textarea.transition.duration"),", box-shadow ").concat(t("textarea.transition.duration"),";\n    appearance: none;\n    border-radius: ").concat(t("textarea.border.radius"),";\n    outline-color: transparent;\n    box-shadow: ").concat(t("textarea.shadow"),";\n}\n\n.p-textarea:enabled:hover {\n    border-color: ").concat(t("textarea.hover.border.color"),";\n}\n\n.p-textarea:enabled:focus {\n    border-color: ").concat(t("textarea.focus.border.color"),";\n    box-shadow: ").concat(t("textarea.focus.ring.shadow"),";\n    outline: ").concat(t("textarea.focus.ring.width")," ").concat(t("textarea.focus.ring.style")," ").concat(t("textarea.focus.ring.color"),";\n    outline-offset: ").concat(t("textarea.focus.ring.offset"),";\n}\n\n.p-textarea.p-invalid {\n    border-color: ").concat(t("textarea.invalid.border.color"),";\n}\n\n.p-textarea.p-variant-filled {\n    background: ").concat(t("textarea.filled.background"),";\n}\n\n.p-textarea.p-variant-filled:enabled:focus {\n    background: ").concat(t("textarea.filled.focus.background"),";\n}\n\n.p-textarea:disabled {\n    opacity: 1;\n    background: ").concat(t("textarea.disabled.background"),";\n    color: ").concat(t("textarea.disabled.color"),";\n}\n\n.p-textarea::placeholder {\n    color: ").concat(t("textarea.placeholder.color"),";\n}\n\n.p-fluid .p-textarea {\n    width: 100%;\n}\n\n.p-textarea-resizable {\n    overflow: hidden;\n    resize: none;\n}\n")},classes:{root:function(e){var t=e.instance,n=e.props;return["p-textarea p-component",{"p-filled":t.filled,"p-textarea-resizable ":n.autoResize,"p-invalid":n.invalid,"p-variant-filled":n.variant?"filled"===n.variant:"filled"===t.$primevue.config.inputStyle||"filled"===t.$primevue.config.inputVariant}]}}}),oe={name:"Textarea",extends:{name:"BaseTextarea",extends:L,props:{modelValue:null,autoResize:Boolean,invalid:{type:Boolean,default:!1},variant:{type:String,default:null}},style:ie,provide:function(){return{$pcTextarea:this,$parentInstance:this}}},inheritAttrs:!1,emits:["update:modelValue"],mounted:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize:function(){this.$el.style.height="auto",this.$el.style.height=this.$el.scrollHeight+"px",parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput:function(e){this.autoResize&&this.resize(),this.$emit("update:modelValue",e.target.value)}},computed:{filled:function(){return null!=this.modelValue&&this.modelValue.toString().length>0},ptmParams:function(){return{context:{disabled:this.$attrs.disabled||""===this.$attrs.disabled}}}}},se=["value","aria-invalid"];oe.render=function(e,t,i,o,s,a){return n(),k("textarea",P({class:e.cx("root"),value:e.modelValue,"aria-invalid":e.invalid||void 0,onInput:t[0]||(t[0]=function(){return a.onInput&&a.onInput.apply(a,arguments)})},e.ptmi("root",a.ptmParams)),null,16,se)};var ae={name:"Portal",props:{appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1}},data:function(){return{mounted:!1}},mounted:function(){this.mounted=T.isClient()},computed:{inline:function(){return this.disabled||"self"===this.appendTo}}};ae.render=function(e,t,o,s,a,r){return r.inline?c(e.$slots,"default",{key:0}):a.mounted?(n(),i(S,{key:1,to:o.appendTo},[c(e.$slots,"default")],8,["to"])):u("",!0)};var re=C.extend({name:"contextmenu",theme:function(e){var t=e.dt;return"\n.p-contextmenu {\n    background: ".concat(t("contextmenu.background"),";\n    color: ").concat(t("contextmenu.color"),";\n    border: 1px solid ").concat(t("contextmenu.border.color"),";\n    border-radius: ").concat(t("contextmenu.border.radius"),";\n    box-shadow: ").concat(t("contextmenu.shadow"),";\n    min-width: 12.5rem;\n}\n\n.p-contextmenu-root-list,\n.p-contextmenu-submenu {\n    margin: 0;\n    padding: ").concat(t("contextmenu.list.padding"),";\n    list-style: none;\n    outline: 0 none;\n    display: flex;\n    flex-direction: column;\n    gap: ").concat(t("contextmenu.list.gap"),";\n}\n\n.p-contextmenu-submenu {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    min-width: 100%;\n    z-index: 1;\n    background: ").concat(t("contextmenu.background"),";\n    color: ").concat(t("contextmenu.color"),";\n    border: 1px solid ").concat(t("contextmenu.border.color"),";\n    border-radius: ").concat(t("contextmenu.border.radius"),";\n    box-shadow: ").concat(t("contextmenu.shadow"),";\n}\n\n.p-contextmenu-item {\n    position: relative;\n}\n\n.p-contextmenu-item-content {\n    transition: background ").concat(t("contextmenu.transition.duration"),", color ").concat(t("contextmenu.transition.duration"),";\n    border-radius: ").concat(t("contextmenu.item.border.radius"),";\n    color: ").concat(t("contextmenu.item.color"),";\n}\n\n.p-contextmenu-item-link {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    text-decoration: none;\n    overflow: hidden;\n    position: relative;\n    color: inherit;\n    padding: ").concat(t("contextmenu.item.padding"),";\n    gap: ").concat(t("contextmenu.item.gap"),";\n    user-select: none;\n}\n\n.p-contextmenu-item-label {\n    line-height: 1;\n}\n\n.p-contextmenu-item-icon {\n    color: ").concat(t("contextmenu.item.icon.color"),";\n}\n\n.p-contextmenu-submenu-icon {\n    color: ").concat(t("contextmenu.submenu.icon.color"),";\n    margin-left: auto;\n    font-size: ").concat(t("contextmenu.submenu.icon.size"),";\n    width: ").concat(t("contextmenu.submenu.icon.size"),";\n    height: ").concat(t("contextmenu.submenu.icon.size"),";\n}\n\n.p-contextmenu-item.p-focus > .p-contextmenu-item-content {\n    color: ").concat(t("contextmenu.item.focus.color"),";\n    background: ").concat(t("contextmenu.item.focus.background"),";\n}\n\n.p-contextmenu-item.p-focus > .p-contextmenu-item-content .p-contextmenu-item-icon {\n    color: ").concat(t("contextmenu.item.icon.focus.color"),";\n}\n\n.p-contextmenu-item.p-focus > .p-contextmenu-item-content .p-contextmenu-submenu-icon {\n    color: ").concat(t("contextmenu.submenu.icon.focus.color"),";\n}\n\n.p-contextmenu-item:not(.p-disabled) > .p-contextmenu-item-content:hover {\n    color: ").concat(t("contextmenu.item.focus.color"),";\n    background: ").concat(t("contextmenu.item.focus.background"),";\n}\n\n.p-contextmenu-item:not(.p-disabled) > .p-contextmenu-item-content:hover .p-contextmenu-item-icon {\n    color: ").concat(t("contextmenu.item.icon.focus.color"),";\n}\n\n.p-contextmenu-item:not(.p-disabled) > .p-contextmenu-item-content:hover .p-contextmenu-submenu-icon {\n    color: ").concat(t("contextmenu.submenu.icon.focus.color"),";\n}\n\n.p-contextmenu-item-active > .p-contextmenu-item-content {\n    color: ").concat(t("contextmenu.item.active.color"),";\n    background: ").concat(t("contextmenu.item.active.background"),";\n}\n\n.p-contextmenu-item-active > .p-contextmenu-item-content .p-contextmenu-item-icon {\n    color: ").concat(t("contextmenu.item.icon.active.color"),";\n}\n\n.p-contextmenu-item-active > .p-contextmenu-item-content .p-contextmenu-submenu-icon {\n    color: ").concat(t("contextmenu.submenu.icon.active.color"),";\n}\n\n.p-contextmenu-separator {\n    border-top: 1px solid  ").concat(t("contextmenu.separator.border.color"),";\n}\n\n.p-contextmenu-enter-from,\n.p-contextmenu-leave-active {\n    opacity: 0;\n}\n\n.p-contextmenu-enter-active {\n    transition: opacity 250ms;\n}\n")},classes:{root:"p-contextmenu p-component",rootList:"p-contextmenu-root-list",item:function(e){var t=e.instance,n=e.processedItem;return["p-contextmenu-item",{"p-contextmenu-item-active":t.isItemActive(n),"p-focus":t.isItemFocused(n),"p-disabled":t.isItemDisabled(n)}]},itemContent:"p-contextmenu-item-content",itemLink:"p-contextmenu-item-link",itemIcon:"p-contextmenu-item-icon",itemLabel:"p-contextmenu-item-label",submenuIcon:"p-contextmenu-submenu-icon",submenu:"p-contextmenu-submenu",separator:"p-contextmenu-separator"}}),le={name:"AngleRightIcon",extends:$},ce=[w("path",{d:"M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z",fill:"currentColor"},null,-1)];le.render=function(e,t,i,o,s,a){return n(),k("svg",P({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),ce,16)};var ue={name:"BaseContextMenu",extends:L,props:{model:{type:Array,default:null},appendTo:{type:[String,Object],default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},global:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:re,provide:function(){return{$pcContextMenu:this,$parentInstance:this}}},de={name:"ContextMenuSub",hostName:"ContextMenu",extends:L,emits:["item-click","item-mouseenter","item-mousemove"],props:{items:{type:Array,default:null},menuId:{type:String,default:null},focusedItemId:{type:String,default:null},root:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},level:{type:Number,default:0},templates:{type:Object,default:null},activeItemPath:{type:Object,default:null},tabindex:{type:Number,default:0}},methods:{getItemId:function(e){return"".concat(this.menuId,"_").concat(e.key)},getItemKey:function(e){return this.getItemId(e)},getItemProp:function(e,t,n){return e&&e.item?D.getItemValue(e.item[t],n):void 0},getItemLabel:function(e){return this.getItemProp(e,"label")},getItemLabelId:function(e){return"".concat(this.menuId,"_").concat(e.key,"_label")},getPTOptions:function(e,t,n){return this.ptm(e,{context:{item:t,active:this.isItemActive(t),focused:this.isItemFocused(t),disabled:this.isItemDisabled(t),index:n}})},isItemActive:function(e){return this.activeItemPath.some((function(t){return t.key===e.key}))},isItemVisible:function(e){return!1!==this.getItemProp(e,"visible")},isItemDisabled:function(e){return this.getItemProp(e,"disabled")},isItemFocused:function(e){return this.focusedItemId===this.getItemId(e)},isItemGroup:function(e){return D.isNotEmpty(e.items)},onItemClick:function(e,t){this.getItemProp(t,"command",{originalEvent:e,item:t.item}),this.$emit("item-click",{originalEvent:e,processedItem:t,isFocus:!0})},onItemMouseEnter:function(e,t){this.$emit("item-mouseenter",{originalEvent:e,processedItem:t})},onItemMouseMove:function(e,t){this.$emit("item-mousemove",{originalEvent:e,processedItem:t,isFocus:!0})},getAriaSetSize:function(){var e=this;return this.items.filter((function(t){return e.isItemVisible(t)&&!e.getItemProp(t,"separator")})).length},getAriaPosInset:function(e){var t=this;return e-this.items.slice(0,e).filter((function(e){return t.isItemVisible(e)&&t.getItemProp(e,"separator")})).length+1},onEnter:function(){T.nestedPosition(this.$refs.container,this.level)},getMenuItemProps:function(e,t){return{action:P({class:this.cx("itemLink"),tabindex:-1,"aria-hidden":!0},this.getPTOptions("itemLink",e,t)),icon:P({class:[this.cx("itemIcon"),this.getItemProp(e,"icon")]},this.getPTOptions("itemIcon",e,t)),label:P({class:this.cx("itemLabel")},this.getPTOptions("itemLabel",e,t)),submenuicon:P({class:this.cx("submenuIcon")},this.getPTOptions("submenuicon",e,t))}}},components:{AngleRightIcon:le},directives:{ripple:A}},me=["tabindex"],he=["id","aria-label","aria-disabled","aria-expanded","aria-haspopup","aria-level","aria-setsize","aria-posinset","data-p-active","data-p-focused","data-p-disabled"],pe=["onClick","onMouseenter","onMousemove"],fe=["href","target"],Ie=["id"],ge=["id"];de.render=function(e,t,s,r,c,d){var m=y("AngleRightIcon"),h=y("ContextMenuSub",!0),p=V("ripple");return n(),i(K,P({name:"p-contextmenusub",onEnter:d.onEnter},e.ptm("menu.transition")),{default:o((function(){return[s.root||s.visible?(n(),k("ul",P({key:0,ref:"container",tabindex:s.tabindex},e.ptm("rootList")),[(n(!0),k(_,null,z(s.items,(function(o,r){return n(),k(_,{key:d.getItemKey(o)},[d.isItemVisible(o)&&!d.getItemProp(o,"separator")?(n(),k("li",P({key:0,id:d.getItemId(o),style:d.getItemProp(o,"style"),class:[e.cx("item",{processedItem:o}),d.getItemProp(o,"class")],role:"menuitem","aria-label":d.getItemLabel(o),"aria-disabled":d.isItemDisabled(o)||void 0,"aria-expanded":d.isItemGroup(o)?d.isItemActive(o):void 0,"aria-haspopup":d.isItemGroup(o)&&!d.getItemProp(o,"to")?"menu":void 0,"aria-level":s.level+1,"aria-setsize":d.getAriaSetSize(),"aria-posinset":d.getAriaPosInset(r),ref_for:!0},d.getPTOptions("item",o,r),{"data-p-active":d.isItemActive(o),"data-p-focused":d.isItemFocused(o),"data-p-disabled":d.isItemDisabled(o)}),[w("div",P({class:e.cx("itemContent"),onClick:function(e){return d.onItemClick(e,o)},onMouseenter:function(e){return d.onItemMouseEnter(e,o)},onMousemove:function(e){return d.onItemMouseMove(e,o)},ref_for:!0},d.getPTOptions("itemContent",o,r)),[s.templates.item?(n(),i(x(s.templates.item),{key:1,item:o.item,hasSubmenu:d.getItemProp(o,"items"),label:d.getItemLabel(o),props:d.getMenuItemProps(o,r)},null,8,["item","hasSubmenu","label","props"])):f((n(),k("a",P({key:0,href:d.getItemProp(o,"url"),class:e.cx("itemLink"),target:d.getItemProp(o,"target"),tabindex:"-1","aria-hidden":"true",ref_for:!0},d.getPTOptions("itemLink",o,r)),[s.templates.itemicon?(n(),i(x(s.templates.itemicon),{key:0,item:o.item,class:a(e.cx("itemIcon"))},null,8,["item","class"])):d.getItemProp(o,"icon")?(n(),k("span",P({key:1,class:[e.cx("itemIcon"),d.getItemProp(o,"icon")],ref_for:!0},d.getPTOptions("itemIcon",o,r)),null,16)):u("",!0),w("span",P({id:d.getItemLabelId(o),class:e.cx("itemLabel"),ref_for:!0},d.getPTOptions("itemLabel",o,r)),l(d.getItemLabel(o)),17,Ie),d.getItemProp(o,"items")?(n(),k(_,{key:2},[s.templates.submenuicon?(n(),i(x(s.templates.submenuicon),{key:0,active:d.isItemActive(o),class:a(e.cx("submenuIcon"))},null,8,["active","class"])):(n(),i(m,P({key:1,class:e.cx("submenuIcon"),ref_for:!0},d.getPTOptions("submenuicon",o,r)),null,16,["class"]))],64)):u("",!0)],16,fe)),[[p]])],16,pe),d.isItemVisible(o)&&d.isItemGroup(o)?(n(),i(h,P({key:0,id:d.getItemId(o)+"_list",role:"menu",class:e.cx("submenu"),menuId:s.menuId,focusedItemId:s.focusedItemId,items:o.items,templates:s.templates,activeItemPath:s.activeItemPath,level:s.level+1,visible:d.isItemActive(o)&&d.isItemGroup(o),pt:e.pt,unstyled:e.unstyled,onItemClick:t[0]||(t[0]=function(t){return e.$emit("item-click",t)}),onItemMouseenter:t[1]||(t[1]=function(t){return e.$emit("item-mouseenter",t)}),onItemMousemove:t[2]||(t[2]=function(t){return e.$emit("item-mousemove",t)}),"aria-labelledby":d.getItemLabelId(o),ref_for:!0},e.ptm("submenu")),null,16,["id","class","menuId","focusedItemId","items","templates","activeItemPath","level","visible","pt","unstyled","aria-labelledby"])):u("",!0)],16,he)):u("",!0),d.isItemVisible(o)&&d.getItemProp(o,"separator")?(n(),k("li",P({key:1,id:d.getItemId(o),style:d.getItemProp(o,"style"),class:[e.cx("separator"),d.getItemProp(o,"class")],role:"separator",ref_for:!0},e.ptm("separator")),null,16,ge)):u("",!0)],64)})),128))],16,me)):u("",!0)]})),_:1},16,["onEnter"])};var be={name:"ContextMenu",extends:ue,inheritAttrs:!1,emits:["focus","blur","show","hide","before-show","before-hide"],target:null,outsideClickListener:null,resizeListener:null,documentContextMenuListener:null,pageX:null,pageY:null,container:null,list:null,data:function(){return{id:this.$attrs.id,focused:!1,focusedItemInfo:{index:-1,level:0,parentKey:""},activeItemPath:[],visible:!1,submenuVisible:!1}},watch:{"$attrs.id":function(e){this.id=e||E()},activeItemPath:function(e){D.isNotEmpty(e)?(this.bindOutsideClickListener(),this.bindResizeListener()):this.visible||(this.unbindOutsideClickListener(),this.unbindResizeListener())}},mounted:function(){this.id=this.id||E(),this.global&&this.bindDocumentContextMenuListener()},beforeUnmount:function(){this.unbindResizeListener(),this.unbindOutsideClickListener(),this.unbindDocumentContextMenuListener(),this.container&&this.autoZIndex&&M.clear(this.container),this.target=null,this.container=null},methods:{getItemProp:function(e,t){return e?D.getItemValue(e[t]):void 0},getItemLabel:function(e){return this.getItemProp(e,"label")},isItemDisabled:function(e){return this.getItemProp(e,"disabled")},isItemVisible:function(e){return!1!==this.getItemProp(e,"visible")},isItemGroup:function(e){return D.isNotEmpty(this.getItemProp(e,"items"))},isItemSeparator:function(e){return this.getItemProp(e,"separator")},getProccessedItemLabel:function(e){return e?this.getItemLabel(e.item):void 0},isProccessedItemGroup:function(e){return e&&D.isNotEmpty(e.items)},toggle:function(e){this.visible?this.hide():this.show(e)},show:function(e){this.$emit("before-show"),this.activeItemPath=[],this.focusedItemInfo={index:-1,level:0,parentKey:""},T.focus(this.list),this.pageX=e.pageX,this.pageY=e.pageY,this.visible?this.position():this.visible=!0,e.stopPropagation(),e.preventDefault()},hide:function(){this.$emit("before-hide"),this.visible=!1,this.activeItemPath=[],this.focusedItemInfo={index:-1,level:0,parentKey:""}},onFocus:function(e){this.focused=!0,this.focusedItemInfo=-1!==this.focusedItemInfo.index?this.focusedItemInfo:{index:-1,level:0,parentKey:""},this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.focusedItemInfo={index:-1,level:0,parentKey:""},this.searchValue="",this.$emit("blur",e)},onKeyDown:function(e){var t=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"ArrowRight":this.onArrowRightKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Space":this.onSpaceKey(e);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!t&&D.isPrintableCharacter(e.key)&&this.searchItems(e,e.key)}},onItemChange:function(e){var t=e.processedItem,n=e.isFocus;if(!D.isEmpty(t)){var i=t.index,o=t.key,s=t.level,a=t.parentKey,r=t.items,l=D.isNotEmpty(r),c=this.activeItemPath.filter((function(e){return e.parentKey!==a&&e.parentKey!==o}));l&&(c.push(t),this.submenuVisible=!0),this.focusedItemInfo={index:i,level:s,parentKey:a},this.activeItemPath=c,n&&T.focus(this.list)}},onItemClick:function(e){var t=e.processedItem,n=this.isProccessedItemGroup(t);if(this.isSelected(t)){var i=t.index,o=t.key,s=t.level,a=t.parentKey;this.activeItemPath=this.activeItemPath.filter((function(e){return o!==e.key&&o.startsWith(e.key)})),this.focusedItemInfo={index:i,level:s,parentKey:a},T.focus(this.list)}else n?this.onItemChange(e):this.hide()},onItemMouseEnter:function(e){this.onItemChange(e)},onItemMouseMove:function(e){this.focused&&this.changeFocusedItemIndex(e,e.processedItem.index)},onArrowDownKey:function(e){var t=-1!==this.focusedItemInfo.index?this.findNextItemIndex(this.focusedItemInfo.index):this.findFirstFocusedItemIndex();this.changeFocusedItemIndex(e,t),e.preventDefault()},onArrowUpKey:function(e){if(e.altKey){if(-1!==this.focusedItemInfo.index){var t=this.visibleItems[this.focusedItemInfo.index];!this.isProccessedItemGroup(t)&&this.onItemChange({originalEvent:e,processedItem:t})}this.popup&&this.hide(),e.preventDefault()}else{var n=-1!==this.focusedItemInfo.index?this.findPrevItemIndex(this.focusedItemInfo.index):this.findLastFocusedItemIndex();this.changeFocusedItemIndex(e,n),e.preventDefault()}},onArrowLeftKey:function(e){var t=this,n=this.visibleItems[this.focusedItemInfo.index],i=this.activeItemPath.find((function(e){return e.key===n.parentKey}));D.isEmpty(n.parent)||(this.focusedItemInfo={index:-1,parentKey:i?i.parentKey:""},this.searchValue="",this.onArrowDownKey(e)),this.activeItemPath=this.activeItemPath.filter((function(e){return e.parentKey!==t.focusedItemInfo.parentKey})),e.preventDefault()},onArrowRightKey:function(e){var t=this.visibleItems[this.focusedItemInfo.index];this.isProccessedItemGroup(t)&&(this.onItemChange({originalEvent:e,processedItem:t}),this.focusedItemInfo={index:-1,parentKey:t.key},this.searchValue="",this.onArrowDownKey(e)),e.preventDefault()},onHomeKey:function(e){this.changeFocusedItemIndex(e,this.findFirstItemIndex()),e.preventDefault()},onEndKey:function(e){this.changeFocusedItemIndex(e,this.findLastItemIndex()),e.preventDefault()},onEnterKey:function(e){if(-1!==this.focusedItemInfo.index){var t=T.findSingle(this.list,'li[id="'.concat("".concat(this.focusedItemIdx),'"]')),n=t&&T.findSingle(t,'a[data-pc-section="itemlink"]');n?n.click():t&&t.click();var i=this.visibleItems[this.focusedItemInfo.index];!this.isProccessedItemGroup(i)&&(this.focusedItemInfo.index=this.findFirstFocusedItemIndex())}e.preventDefault()},onSpaceKey:function(e){this.onEnterKey(e)},onEscapeKey:function(e){this.hide(),!this.popup&&(this.focusedItemInfo.index=this.findFirstFocusedItemIndex()),e.preventDefault()},onTabKey:function(e){if(-1!==this.focusedItemInfo.index){var t=this.visibleItems[this.focusedItemInfo.index];!this.isProccessedItemGroup(t)&&this.onItemChange({originalEvent:e,processedItem:t})}this.hide()},onEnter:function(e){T.addStyles(e,{position:"absolute"}),this.position(),this.autoZIndex&&M.set("menu",e,this.baseZIndex+this.$primevue.config.zIndex.menu)},onAfterEnter:function(){this.bindOutsideClickListener(),this.bindResizeListener(),this.$emit("show"),T.focus(this.list)},onLeave:function(){this.$emit("hide"),this.container=null},onAfterLeave:function(e){this.autoZIndex&&M.clear(e),this.unbindOutsideClickListener(),this.unbindResizeListener()},position:function(){var e=this.pageX+1,t=this.pageY+1,n=this.container.offsetParent?this.container.offsetWidth:T.getHiddenElementOuterWidth(this.container),i=this.container.offsetParent?this.container.offsetHeight:T.getHiddenElementOuterHeight(this.container),o=T.getViewport();e+n-document.body.scrollLeft>o.width&&(e-=n),t+i-document.body.scrollTop>o.height&&(t-=i),e<document.body.scrollLeft&&(e=document.body.scrollLeft),t<document.body.scrollTop&&(t=document.body.scrollTop),this.container.style.left=e+"px",this.container.style.top=t+"px"},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(t){var n=e.container&&!e.container.contains(t.target),i=!e.visible||!(e.target&&(e.target===t.target||e.target.contains(t.target)));n&&i&&e.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.visible&&!T.isTouchDevice()&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindDocumentContextMenuListener:function(){var e=this;this.documentContextMenuListener||(this.documentContextMenuListener=function(t){2===t.button&&e.show(t)},document.addEventListener("contextmenu",this.documentContextMenuListener))},unbindDocumentContextMenuListener:function(){this.documentContextMenuListener&&(document.removeEventListener("contextmenu",this.documentContextMenuListener),this.documentContextMenuListener=null)},isItemMatched:function(e){var t;return this.isValidItem(e)&&(null===(t=this.getProccessedItemLabel(e))||void 0===t?void 0:t.toLocaleLowerCase().startsWith(this.searchValue.toLocaleLowerCase()))},isValidItem:function(e){return!!e&&!this.isItemDisabled(e.item)&&!this.isItemSeparator(e.item)&&this.isItemVisible(e.item)},isValidSelectedItem:function(e){return this.isValidItem(e)&&this.isSelected(e)},isSelected:function(e){return this.activeItemPath.some((function(t){return t.key===e.key}))},findFirstItemIndex:function(){var e=this;return this.visibleItems.findIndex((function(t){return e.isValidItem(t)}))},findLastItemIndex:function(){var e=this;return D.findLastIndex(this.visibleItems,(function(t){return e.isValidItem(t)}))},findNextItemIndex:function(e){var t=this,n=e<this.visibleItems.length-1?this.visibleItems.slice(e+1).findIndex((function(e){return t.isValidItem(e)})):-1;return n>-1?n+e+1:e},findPrevItemIndex:function(e){var t=this,n=e>0?D.findLastIndex(this.visibleItems.slice(0,e),(function(e){return t.isValidItem(e)})):-1;return n>-1?n:e},findSelectedItemIndex:function(){var e=this;return this.visibleItems.findIndex((function(t){return e.isValidSelectedItem(t)}))},findFirstFocusedItemIndex:function(){var e=this.findSelectedItemIndex();return e<0?this.findFirstItemIndex():e},findLastFocusedItemIndex:function(){var e=this.findSelectedItemIndex();return e<0?this.findLastItemIndex():e},searchItems:function(e,t){var n=this;this.searchValue=(this.searchValue||"")+t;var i=-1,o=!1;return-1!==(i=-1!==this.focusedItemInfo.index?-1===(i=this.visibleItems.slice(this.focusedItemInfo.index).findIndex((function(e){return n.isItemMatched(e)})))?this.visibleItems.slice(0,this.focusedItemInfo.index).findIndex((function(e){return n.isItemMatched(e)})):i+this.focusedItemInfo.index:this.visibleItems.findIndex((function(e){return n.isItemMatched(e)})))&&(o=!0),-1===i&&-1===this.focusedItemInfo.index&&(i=this.findFirstFocusedItemIndex()),-1!==i&&this.changeFocusedItemIndex(e,i),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){n.searchValue="",n.searchTimeout=null}),500),o},changeFocusedItemIndex:function(e,t){this.focusedItemInfo.index!==t&&(this.focusedItemInfo.index=t,this.scrollInView())},scrollInView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=-1!==e?"".concat(this.id,"_").concat(e):this.focusedItemIdx,n=T.findSingle(this.list,'li[id="'.concat(t,'"]'));n&&n.scrollIntoView&&n.scrollIntoView({block:"nearest",inline:"start"})},createProcessedItems:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=[];return e&&e.forEach((function(e,a){var r=(""!==o?o+"_":"")+a,l={item:e,index:a,level:n,key:r,parent:i,parentKey:o};l.items=t.createProcessedItems(e.items,n+1,l,r),s.push(l)})),s},containerRef:function(e){this.container=e},listRef:function(e){this.list=e?e.$el:void 0}},computed:{processedItems:function(){return this.createProcessedItems(this.model||[])},visibleItems:function(){var e=this,t=this.activeItemPath.find((function(t){return t.key===e.focusedItemInfo.parentKey}));return t?t.items:this.processedItems},focusedItemIdx:function(){return-1!==this.focusedItemInfo.index?"".concat(this.id).concat(D.isNotEmpty(this.focusedItemInfo.parentKey)?"_"+this.focusedItemInfo.parentKey:"","_").concat(this.focusedItemInfo.index):null}},components:{ContextMenuSub:de,Portal:ae}};be.render=function(e,t,r,l,c,d){var m=y("ContextMenuSub"),h=y("Portal");return n(),i(h,{appendTo:e.appendTo},{default:o((function(){return[s(K,P({name:"p-contextmenu",onEnter:d.onEnter,onAfterEnter:d.onAfterEnter,onLeave:d.onLeave,onAfterLeave:d.onAfterLeave},e.ptm("transition")),{default:o((function(){return[c.visible?(n(),k("div",P({key:0,ref:d.containerRef,class:e.cx("root")},e.ptmi("root")),[s(m,{ref:d.listRef,id:c.id+"_list",class:a(e.cx("rootList")),role:"menubar",root:!0,tabindex:e.tabindex,"aria-orientation":"vertical","aria-activedescendant":c.focused?d.focusedItemIdx:void 0,menuId:c.id,focusedItemId:c.focused?d.focusedItemIdx:void 0,items:d.processedItems,templates:e.$slots,activeItemPath:c.activeItemPath,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,level:0,visible:c.submenuVisible,pt:e.pt,unstyled:e.unstyled,onFocus:d.onFocus,onBlur:d.onBlur,onKeydown:d.onKeyDown,onItemClick:d.onItemClick,onItemMouseenter:d.onItemMouseEnter,onItemMousemove:d.onItemMouseMove},null,8,["id","class","tabindex","aria-activedescendant","menuId","focusedItemId","items","templates","activeItemPath","aria-labelledby","aria-label","visible","pt","unstyled","onFocus","onBlur","onKeydown","onItemClick","onItemMouseenter","onItemMousemove"])],16)):u("",!0)]})),_:1},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]})),_:1},8,["appendTo"])};const xe=t({components:{IconFile:ne,Textarea:oe,Button:F,ContextMenu:be},data(){return{textMode:!0,contentValue:"",loading:!1,messageList:[],scrollElement:null,downLoadProcess:0,uploadProcess:0,onDownLoadItemId:"",onRightClickItem:"",baseUrl:`http://${window.location.hostname}:7071/api`,uploadTask:null,hasEnter:!1,contextMenu:[{label:"删除",icon:"pi pi-trash",command:()=>{console.log(this.onRightClickItem),R({title:"提示",content:"确认删除吗？",confirmColor:"var(--p-primary-color)",cancelColor:"var(--p-surface-500)",success:()=>{this.deleteItems([this.onRightClickItem])}})}}]}},onLoad(){},mounted(){this.scrollElement=this.$refs.scrollView,this.getMessageList(),this.initSSE()},methods:{initSSE(){const e=new EventSource(`http://${window.location.hostname}:7080/sse`);e.onmessage=e=>{"Can refresh"==JSON.parse(e.data).content&&this.getMessageList()},e.onerror=e=>{console.error("Error occurred:",e)}},handleDragEnter(e){this.hasEnter||(e.preventDefault(),this.hasEnter=!0)},handleDragOver(e){e.preventDefault()},handleDragLeave(e){this.hasEnter=!1},handleDrop(e){this.hasEnter=!1,this.$refs.popup.open(),e.preventDefault();const t=Array.from(e.dataTransfer.files);this.uploadTask=O({url:this.baseUrl+"/message/uploadFile",file:t[0],success:e=>{const t=JSON.parse(e.data);this.handleSend(t.data),this.$refs.popup.close()}}),this.uploadTask.onProgressUpdate((e=>{this.uploadProcess=e.progress}))},handleSend(e){if(!this.contentValue&&!e)return void B({icon:"error",title:"内容不能为空！"});this.loading=!0;const t={type:e?"file":"text",dateTime:(new Date).toLocaleString(),content:this.contentValue,fileData:e};N({url:this.baseUrl+"/message/addMessageData",method:"POST",data:{data:t}}).then((e=>{this.loading=!1,this.contentValue=""}))},handleFileChoose(){H().then((e=>{const t=this;this.$refs.popup.open(),this.uploadTask=O({url:this.baseUrl+"/message/uploadFile",filePath:e.tempFilePaths[0],name:"file",success:e=>{const n=JSON.parse(e.data);t.handleSend(n.data),this.$refs.popup.close()}}),this.uploadTask.onProgressUpdate((e=>{this.uploadProcess=e.progress}))}))},cancelUpload(){this.uploadTask.abort()},getMessageList(){N({url:this.baseUrl+"/message/getMessageList",method:"GET"}).then((e=>{this.messageList=e.data,U((()=>{this.scrollElement.scrollTop=this.scrollElement.scrollHeight}))}))},deleteItems(e){N({url:this.baseUrl+"/message/deleteMessages",method:"POST",data:{data:e}}).then((e=>{B({icon:"success",title:"消息删除成功！"})}))},computeSize:e=>e>=1024?e>=1048576?(e/1024/1024).toFixed(2)+"M":(e/1024).toFixed(2)+"KB":e+"B",handleDownLoadFile(e){const t=this.baseUrl+`/message/downLoadFile?path=${encodeURIComponent(e.fileData.filepath)}&name=${encodeURIComponent(e.fileData.originalFilename)}`;this.onItemId=e.id;Y({url:t,success:t=>{this.onItemId="";const n=document.createElement("a");n.href=t.tempFilePath,n.download=e.fileData.originalFilename,n.click()}}).onProgressUpdate((t=>{this.downLoadProcess=t.totalBytesWritten/e.fileData.size*100}))},onItemRightClick(e,t){console.log(t),this.onRightClickItem=t,this.$refs.contextMenuRef.show(e)}}},[["render",function(e,t,a,c,h,p){const f=d,I=m,g=j,v=y("Button"),C=y("Textarea"),L=b(x("uni-popup-dialog"),W),P=b(x("uni-popup"),te),T=y("ContextMenu");return n(),k("div",{class:"content",onDragenter:t[5]||(t[5]=(...e)=>p.handleDragEnter&&p.handleDragEnter(...e))},[w("div",{ref:"scrollView",class:"scroll-view"},[(n(!0),k(_,null,z(h.messageList,(e=>(n(),k("div",{class:"item-container",key:e.id},[w("div",{class:"time"},l(e.dateTime),1),w("div",{class:"item-content",onContextmenu:t=>p.onItemRightClick(t,e)},["text"==e.type?(n(),i(I,{key:0},{default:o((()=>[s(f,{class:"content-text"},{default:o((()=>[r(l(e.content),1)])),_:2},1024)])),_:2},1024)):"file"==e.type?(n(),k("div",{key:1,class:"file-container"},[w("div",{class:"file-block"},[w("div",{class:"file-name"},[w("i",{class:"pi pi-file"}),s(f,{class:"content-text"},{default:o((()=>[r(l(e.fileData.originalFilename),1)])),_:2},1024)]),w("div",null,[h.onDownLoadItemId==e.id?(n(),i(g,{key:0,percent:h.downLoadProcess,"stroke-width":"3"},null,8,["percent"])):u("",!0)])]),s(f,{style:{color:"var(--p-primary-contrast-color)"}},{default:o((()=>[r(l(p.computeSize(e.fileData.size)),1)])),_:2},1024),w("div",null,[s(v,{icon:"pi pi-download","aria-label":"下载",severity:"secondary",onClick:t=>p.handleDownLoadFile(e)},null,8,["onClick"])])])):u("",!0)],40,["onContextmenu"])])))),128))],512),w("div",{class:"input-module"},[s(C,{modelValue:h.contentValue,"onUpdate:modelValue":t[0]||(t[0]=e=>h.contentValue=e),placeholder:"请输入内容",rows:"4",style:{flex:"1"}},null,8,["modelValue"]),w("div",{style:{display:"flex","flex-direction":"column",gap:"10px"}},[s(v,{icon:"pi pi-file-arrow-up","aria-label":"传文件",severity:"secondary",onClick:p.handleFileChoose},null,8,["onClick"]),s(v,{icon:"pi pi-send","aria-label":"传文本",loading:h.loading,onClick:t[1]||(t[1]=e=>p.handleSend())},null,8,["loading"])])]),s(P,{ref:"popup",type:"dialog"},{default:o((()=>[s(L,{mode:"base",type:"warning",title:"上传进度",showClose:!1,"confirm-text":"取消",onConfirm:p.cancelUpload},{default:o((()=>[s(g,{style:{width:"100%"},percent:h.uploadProcess,activeColor:"var(--p-primary-color)","stroke-width":"3"},null,8,["percent"])])),_:1},8,["onConfirm"])])),_:1},512),h.hasEnter?(n(),k("div",{key:0,class:"dragMask",onDragleave:t[2]||(t[2]=(...e)=>p.handleDragLeave&&p.handleDragLeave(...e)),onDragover:t[3]||(t[3]=(...e)=>p.handleDragOver&&p.handleDragOver(...e)),onDrop:t[4]||(t[4]=(...e)=>p.handleDrop&&p.handleDrop(...e))}," 放开拖拽将上传文件，若不想上传请移出，若多文件只会上传第一个 ",32)):u("",!0),s(T,{ref:"contextMenuRef",model:h.contextMenu},null,8,["model"])],32)}],["__scopeId","data-v-30c196f4"]]);export{xe as default};
